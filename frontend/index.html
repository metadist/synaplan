<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Favicon for modern browsers (SVG) -->
    <link rel="icon" type="image/svg+xml" href="/single_bird.svg" />
    <!-- Fallback favicon for older browsers -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
    <!-- Apple Touch Icon for iOS home screen -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <!-- Web App Manifest for Android/PWA -->
    <link rel="manifest" href="/site.webmanifest" />
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#0003c7" />

    <title>Synaplan</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
<!-- Synaplan Chat Widget (ES Module with Auto Code-Splitting) -->
<!-- Skip widget loading in test environment (Playwright sets window.__PLAYWRIGHT__) -->
<script type="module">
  // Don't load widget in test environment
  if (!window.__PLAYWRIGHT__ && !window.navigator.webdriver) {
    import('http://localhost:8000/widget.js').then((module) => {
      const SynaplanWidget = module.default
      SynaplanWidget.init({
        widgetId: 'wdg_73a34e81b115d163d62ee93870a04547',
        position: 'bottom-right',
        primaryColor: '#007bff',
        iconColor: '#ffffff',
        buttonIcon: 'chat',
        defaultTheme: 'light',
        autoOpen: false,
        autoMessage: 'Hello! How can I help you today?',
        messageLimit: 50,
        maxFileSize: 10,
        allowFileUpload: false,
        fileUploadLimit: 3,
        lazy: true  // Load chat on button click (set to false for immediate load)
      })
    })
  }
</script>
  </body>
</html>
