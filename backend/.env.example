# =============================================================================
# Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env (git-ignored) and adjust values as needed
# This file contains ONLY Docker-specific variables
# For backend/frontend configs, use backend/.env.local and frontend/.env.local
# =============================================================================

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
APP_ENV=dev
AUTO_DOWNLOAD_MODELS=false
APP_SECRET=changeme_in_production

# Backend URL (used for generating links in emails, etc.)
APP_URL=http://localhost:8000

# Log format: json (production) or text (development)
LOG_FORMAT=text

# -----------------------------------------------------------------------------
# Google reCAPTCHA v3 (optional - disabled in dev by default)
# -----------------------------------------------------------------------------
# Get your keys from: https://www.google.com/recaptcha/admin
RECAPTCHA_ENABLED=false
RECAPTCHA_SITE_KEY=your_site_key_here
RECAPTCHA_SECRET_KEY=your_secret_key_here
RECAPTCHA_MIN_SCORE=0.5

# -----------------------------------------------------------------------------
# Email / Mailer
# -----------------------------------------------------------------------------
# Use null://null for dev (no emails sent)
# Use smtp://mailhog:1025 to test with MailHog UI (http://localhost:8025)
# Production: smtp://user:pass@smtp.example.com:587
MAILER_DSN=null://null

# -----------------------------------------------------------------------------
# WhatsApp Business API (optional)
# -----------------------------------------------------------------------------
WHATSAPP_ENABLED=false
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_WEBHOOK_VERIFY_TOKEN=

# -----------------------------------------------------------------------------
# External AI API Keys (optional - Ollama works without these)
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
GROQ_API_KEY=
GOOGLE_GEMINI_API_KEY=

# -----------------------------------------------------------------------------
# Ollama (Local AI - runs in Docker by default)
# -----------------------------------------------------------------------------
# Docker: http://ollama:11434 | Local: http://localhost:11434
OLLAMA_BASE_URL=http://ollama:11434

# -----------------------------------------------------------------------------
# NVIDIA Triton Inference Server (optional - for self-hosted LLMs via gRPC)
# -----------------------------------------------------------------------------
# Triton gRPC endpoint (port 8001 is the default gRPC port)
# Example: triton-server:8001 (Docker) or localhost:8001 (local)
TRITON_SERVER_URL=

# -----------------------------------------------------------------------------
# OIDC Authentication
# Optional - for external authentication providers
# -----------------------------------------------------------------------------
OIDC_DISCOVERY_URL=https://discoveryurl.com
OIDC_CLIENT_ID=change-me
OIDC_CLIENT_SECRET=change-me

# -----------------------------------------------------------------------------
# Token Authentication
# -----------------------------------------------------------------------------
# Secret key for HMAC-signing access tokens (change in production!)
TOKEN_SECRET=changeme_use_strong_secret_in_production

# -----------------------------------------------------------------------------
# Social Login - Google OAuth 2.0
# -----------------------------------------------------------------------------
# Get credentials from: https://console.cloud.google.com/apis/credentials
# Authorized redirect URI: http://localhost:8000/api/v1/auth/google/callback
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Google Cloud Project ID (optional - for advanced Google Cloud services)
GOOGLE_CLOUD_PROJECT_ID=

# -----------------------------------------------------------------------------
# Social Login - GitHub OAuth 2.0
# -----------------------------------------------------------------------------
# Get credentials from: https://github.com/settings/developers
# Authorization callback URL: http://localhost:8000/api/v1/auth/github/callback
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Frontend URL (for OAuth redirects)
# -----------------------------------------------------------------------------
FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Public Synaplan URL (required)
# -----------------------------------------------------------------------------
# This is the publicly accessible URL where Synaplan is served
# In development: http://localhost:8000
# In production: https://app.synaplan.com
SYNAPLAN_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Brave Search API (for Web Search functionality)
# -----------------------------------------------------------------------------
# Get your API key from: https://api.search.brave.com/
BRAVE_SEARCH_API_KEY=
BRAVE_SEARCH_API_URL=https://api.search.brave.com/res/v1
BRAVE_SEARCH_ENABLED=false
BRAVE_SEARCH_COUNT=10
# Default country code (ISO 3166-1 alpha-2) - will be overridden by detected language
BRAVE_SEARCH_COUNTRY=us
# Default search language (ISO 639-1) - will be overridden by detected language
BRAVE_SEARCH_SEARCH_LANG=en

# -----------------------------------------------------------------------------
# Stripe Payment Integration
# -----------------------------------------------------------------------------
# Get your keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
# Price IDs from Stripe Dashboard (Products â†’ Prices)
STRIPE_PRICE_PRO=price_pro_monthly
STRIPE_PRICE_TEAM=price_team_monthly
STRIPE_PRICE_BUSINESS=price_business_monthly

# Payment methods (comma-separated)
# Note: apple_pay and google_pay are automatically available through 'card' payment method
# Available: card, link, sepa_debit, klarna, bancontact, eps, giropay, ideal, p24, sofort
# See: https://stripe.com/docs/payments/checkout/payment-methods
STRIPE_PAYMENT_METHODS=card,link,klarna

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Docker Compose MySQL credentials
MYSQL_DATABASE=synaplan
MYSQL_USER=synaplan_user
MYSQL_PASSWORD=synaplan_password
MYSQL_ROOT_PASSWORD=root_password

# Symfony Doctrine database URLs (read/write replica pattern)
# Format: mysql://user:password@host:port/database?serverVersion=X.X&charset=utf8mb4
# For single-server setup, use the same URL for both
DATABASE_WRITE_URL=mysql://synaplan_user:synaplan_password@db:3306/synaplan?serverVersion=11.8&charset=utf8mb4
DATABASE_READ_URL=mysql://synaplan_user:synaplan_password@db:3306/synaplan?serverVersion=11.8&charset=utf8mb4

# -----------------------------------------------------------------------------
# Tika Service (Document Text Extraction)
# -----------------------------------------------------------------------------
TIKA_BASE_URL=http://tika:9998
TIKA_TIMEOUT_MS=30000
TIKA_RETRIES=2
TIKA_RETRY_BACKOFF_MS=1000
TIKA_HTTP_USER=
TIKA_HTTP_PASS=
TIKA_MIN_LENGTH=10
TIKA_MIN_ENTROPY=3.0

# -----------------------------------------------------------------------------
# PDF Rasterizer (for scanned PDFs and OCR)
# -----------------------------------------------------------------------------
RASTERIZE_DPI=150
RASTERIZE_PAGE_CAP=10
RASTERIZE_TIMEOUT_MS=30000

# -----------------------------------------------------------------------------
# Whisper Service (Audio Transcription)
# -----------------------------------------------------------------------------
WHISPER_BINARY=/usr/local/bin/whisper
WHISPER_MODELS_PATH=/var/www/backend/var/whisper
WHISPER_DEFAULT_MODEL=base
WHISPER_ENABLED=true
FFMPEG_BINARY=/usr/bin/ffmpeg

