# Symfony Environment
APP_ENV=dev
APP_SECRET=changeme_generate_with_bin_console_secrets_generate_keys

# Database (MariaDB 11.8 Galera Cluster)
DATABASE_WRITE_URL=mysql://synaplan_user:synaplan_password@db:3306/synaplan?serverVersion=11.8&charset=utf8mb4
DATABASE_READ_URL=mysql://synaplan_user:synaplan_password@db:3306/synaplan?serverVersion=11.8&charset=utf8mb4

# Redis (Cache, Sessions, Messenger)
REDIS_URL=redis://redis:6379
REDIS_CACHE_PREFIX=synaplan_cache
REDIS_SESSION_PREFIX=synaplan_session

# Messenger (Async Queues)
MESSENGER_TRANSPORT_DSN=redis://redis:6379/messages

# AI Provider: Anthropic
ANTHROPIC_API_KEY=sk-ant-your-key-here
ANTHROPIC_BASE_URL=https://api.anthropic.com/v1
ANTHROPIC_DEFAULT_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_TIMEOUT=60
ANTHROPIC_MAX_RETRIES=3

# AI Provider: OpenAI
OPENAI_API_KEY=sk-your-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_DEFAULT_MODEL=gpt-4o
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_IMAGE_MODEL=dall-e-3
OPENAI_TTS_MODEL=tts-1
OPENAI_STT_MODEL=whisper-1

# AI Provider: Ollama (Local)
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_DEFAULT_MODEL=llama3.2:3b
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# AI Provider: Default & Fallback
AI_DEFAULT_PROVIDER=test
AI_FALLBACK_CHAIN=anthropic,openai,ollama
AI_FALLBACK_TIMEOUT=60

# External Services
TIKA_BASE_URL=http://tika:9998
WHISPER_MODEL_PATH=/app/models/whisper

# File Storage
UPLOADS_DIR=/app/var/uploads
MAX_UPLOAD_SIZE=50M

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT_LIMIT=100
RATE_LIMIT_DEFAULT_WINDOW=60

# Circuit Breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2
CIRCUIT_BREAKER_TIMEOUT=60
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# Security
JWT_SECRET_KEY=%kernel.project_dir%/config/jwt/private.pem
JWT_PUBLIC_KEY=%kernel.project_dir%/config/jwt/public.pem
JWT_PASSPHRASE=your_passphrase_here
JWT_TOKEN_TTL=86400

# CORS (Frontend URLs)
CORS_ALLOW_ORIGIN=^https?://(localhost|127\.0\.0\.1|synaplan\.com)(:[0-9]+)?$

# Feature Flags
FEATURE_SYMFONY_API_ENABLED=true
FEATURE_WIDGET_SYMFONY_ENABLED=false
FEATURE_RATE_LIMITING_STRICT=true

# Monitoring & Logging
LOG_LEVEL=info
SENTRY_DSN=
PROMETHEUS_ENABLED=false

# Mailer Configuration
# Dev: Use MailHog (web UI: http://localhost:8025)
MAILER_DSN=smtp://mailhog:1025
# Test: Use null transport (no emails sent)
# MAILER_DSN=null://null
# Production: Use real SMTP
# MAILER_DSN=smtp://user:pass@smtp.gmail.com:587
# MAILER_DSN=smtp://apikey:YOUR_SENDGRID_KEY@smtp.sendgrid.net:587

APP_SENDER_EMAIL=noreply@synaplan.com
APP_SENDER_NAME="Synaplan"
APP_URL=http://localhost:8000
FRONTEND_URL=http://localhost:5173

# Tika Configuration (for document text extraction)
TIKA_URL=http://tika:9998
TIKA_TIMEOUT_MS=30000
TIKA_RETRIES=2
TIKA_RETRY_BACKOFF_MS=1000
TIKA_HTTP_USER=
TIKA_HTTP_PASS=
TIKA_MIN_LENGTH=50
TIKA_MIN_ENTROPY=2.0

# PDF Rasterization Configuration
RASTERIZE_DPI=150
RASTERIZE_PAGE_CAP=10
RASTERIZE_TIMEOUT_MS=30000

# Development
XDEBUG_MODE=off

